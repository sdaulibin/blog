# 财富产品平台数据流向解析

> 基于分层数仓的数据流转架构

## 数据流向图

![财富产品平台数据流向](../assets/财富产品平台数据流向.png)

---

## 📊 数据流向概述

财富产品平台采用**经典数仓分层架构**（ODS → DWD → ADS），实现从源系统到应用系统的完整数据流转。

---

## 🔄 四层架构详解

### ① 应用系统层

业务应用通过**数据访问接口**调用查询库数据：

| 应用系统     | 功能说明           |
| ------------ | ------------------ |
| **资产配置** | 资产配置建议与管理 |
| **产品中心** | 产品信息管理       |
| **产品研究** | 产品研究分析       |
| **基金投顾** | 基金投资顾问服务   |
| ...          | 更多业务应用       |

---

### ② 查询库层

面向应用的**主题数据查询层**，按业务域组织：

#### 产品数据

| 数据项   | 说明         |
| -------- | ------------ |
| 产品信息 | 产品基础属性 |
| 行情信息 | 实时行情数据 |
| 产品指标 | 产品业绩指标 |
| 产品标签 | 产品分类标签 |

#### 组合策略数据

| 数据项   | 说明         |
| -------- | ------------ |
| 组合信息 | 投资组合配置 |
| 策略信息 | 投资策略定义 |
| 指标数据 | 策略业绩指标 |
| 分类数据 | 策略分类体系 |

#### 客户数据

| 数据项   | 说明         |
| -------- | ------------ |
| 基本信息 | 客户基础信息 |
| 客户分组 | 客户细分分组 |
| 建议书   | 财富规划建议 |
| 客户标签 | 客户画像标签 |

#### 资产数据

| 数据项   | 说明         |
| -------- | ------------ |
| 资产总览 | 整体资产概览 |
| 资产明细 | 资产详细清单 |
| 收益明细 | 投资收益记录 |
| 资产账单 | 资产变动账单 |

---

### ③ 批处理系统层（数仓）

采用**经典数仓分层**，自底向上流转：

#### ODS 操作数据层（接口适配）

| 接口数据       | 来源说明       |
| -------------- | -------------- |
| 普通TA接口数据 | TA系统批量数据 |
| 实时TA接口数据 | TA系统实时数据 |
| 估值接口数据   | 产品估值数据   |
| 直销接口数据   | 直销渠道数据   |
| 业务接口       | 其他业务数据   |
| 资讯数据       | 市场资讯数据   |

#### DWD 明细数据层（稳定模型）

统一的**数据主题域模型**：

- 客户域
- 基金账户域
- 产品域
- 渠道域
- 参数域
- 交易域
- 持仓域

#### ADS 应用数据层（应用指标）

面向业务的**汇总指标**：

| 指标类型 | 说明         |
| -------- | ------------ |
| 客户指标 | 客户相关统计 |
| 渠道指标 | 渠道业绩统计 |
| 产品指标 | 产品业绩统计 |
| 交易指标 | 交易量统计   |
| 持仓指标 | 持仓规模统计 |
| 收益指标 | 收益率统计   |

---

### ④ 源系统层

数据的**原始来源**：

| 源系统           | 提供数据       |
| ---------------- | -------------- |
| **CRM系统**      | 员工、客户关系 |
| **客户数据集市** | 客户基础数据   |
| **聚源数据**     | 行情、资讯     |
| **各类业务系统** | 产品、交易     |

---

## 🔄 数据流转方向

```
源系统 → 数据采集同步 → ODS → DWD → ADS → 查询库 → 应用系统
         (ETL/CDC)      (贴源)  (清洗)  (汇总)  (服务)   (调用)
```

---

## 💡 架构优势

1. **层次清晰**：职责分明，易于维护
2. **数据复用**：中间层数据可被多应用复用
3. **灵活扩展**：新增应用只需对接查询库
4. **质量可控**：每层有独立的数据质量保障
