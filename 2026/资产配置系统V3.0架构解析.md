# 财富产品中台架构解析

> 基于信创技术栈的企业级微服务架构

## 架构图

![[../assets/资产配置系统架构图.png]]

---

## 📊 分层架构概览

```
┌─────────────────────────────────────────────────────────┐
│                      View层（展示层）                      │
├─────────────────────────────────────────────────────────┤
│                    应用组件（业务功能层）                    │
├─────────────────────────────────────────────────────────┤
│                 技术组件/开发框架（微服务治理层）              │
├─────────────────────────────────────────────────────────┤
│                     数据访问层                            │
├─────────────────────────────────────────────────────────┤
│                     基础环境（运行时层）                     │
├─────────────────────────────────────────────────────────┤
│                     资源层（基础设施层）                     │
└─────────────────────────────────────────────────────────┘
```

---

## 🔍 各层详解

### 1. View层（展示层）

**职责**：负责用户界面展示和交互

| 组件           | 技术           | 作用                                                 |
| -------------- | -------------- | ---------------------------------------------------- |
| **WEB端**      | Vue.js         | 后台管理系统前端，SPA 单页应用                       |
| **移动端**     | H5             | 移动端页面，跨平台兼容                               |
| **HTTP服务器** | TongHttpServer | 国产 HTTP 服务器，替代 Nginx，处理静态资源和反向代理 |

**特点**：前后端分离架构，支持多终端访问

---

### 2. 应用组件（业务功能层）

**职责**：提供通用业务功能支撑

| 组件           | 技术        | 作用                                   |
| -------------- | ----------- | -------------------------------------- |
| **日志组件**   | log4j2      | 统一日志记录，支持异步日志和日志分级   |
| **接口管理**   | Swagger     | API 文档自动生成，方便前后端联调       |
| **任务调度**   | 自研        | 定时任务管理，支持分布式调度           |
| **工作流**     | Activiti    | 流程引擎，处理审批、流转等业务流程     |
| **权限认证**   | Sa-Token    | 轻量级认证框架，支持 RBAC 权限模型     |
| **分库分表**   | Sharding    | 数据库水平拆分，解决单表数据量过大问题 |
| **报表管理**   | EasyExcel   | Excel 导入导出，高性能处理大数据量     |
| **数据库操作** | MyBatisPlus | ORM 框架，简化 CRUD 操作               |

**特点**：组件化设计，可插拔式架构

---

### 3. 技术组件/开发框架（微服务治理层）

**职责**：微服务基础设施和治理能力

| 组件         | 技术                     | 作用                               |
| ------------ | ------------------------ | ---------------------------------- |
| **RPC通信**  | Feign/Rest               | 声明式 HTTP 客户端，简化服务间调用 |
| **链路追踪** | Spring Cloud Sleuth      | 分布式追踪，排查跨服务调用问题     |
| **负载均衡** | Spring Cloud Ribbon      | 客户端负载均衡，实现服务高可用     |
| **限流熔断** | Spring Cloud Hystrix     | 服务降级保护，防止雪崩效应         |
| **核心框架** | SpringCloud + SpringBoot | 微服务开发基础框架                 |

**特点**：Spring Cloud 全家桶，成熟稳定

---

### 4. 数据访问层

**职责**：统一数据访问抽象

| 组件            | 技术          | 作用                                          |
| --------------- | ------------- | --------------------------------------------- |
| **数据库连接**  | JDBC          | Java 数据库连接标准接口                       |
| **Redis客户端** | Jedis/Lettuce | 缓存访问，Lettuce 支持响应式编程              |
| **连接池**      | Hikari/Druid  | 数据库连接池，Hikari 性能最优，Druid 监控更强 |
| **Python**      | Python        | 用于 AI/数据分析等特定场景                    |

**特点**：多数据源支持，连接池优化

---

### 5. 基础环境（运行时层）

**职责**：应用运行基础环境

| 组件           | 技术    | 作用                                 |
| -------------- | ------- | ------------------------------------ |
| **应用服务器** | TongWEB | 国产应用服务器，替代 Tomcat/WebLogic |
| **Java运行时** | 龙井JDK | 阿里龙井 JDK，国产 Java 运行时       |

**特点**：信创合规，国产化替代

---

### 6. 资源层（基础设施层）

**职责**：底层基础设施资源

| 组件               | 技术       | 作用                       |
| ------------------ | ---------- | -------------------------- |
| **数据库**         | 国产数据库 | 达梦、人大金仓、GaussDB 等 |
| **关系数据库服务** | TongRDS    | 东方通关系数据库服务       |
| **文件存储**       | 共享存储   | 分布式文件系统             |

**特点**：全面国产化，满足信创要求

---

## 🔧 支撑组件

| 组件           | 技术                 | 作用                                            |
| -------------- | -------------------- | ----------------------------------------------- |
| **配置中心**   | Nacos/Apollo         | 动态配置管理，支持配置热更新                    |
| **自动化运维** | SEE                  | 运维平台，自动化部署和监控                      |
| **日志中心**   | ELK                  | Elasticsearch + Logstash + Kibana，日志采集分析 |
| **服务网关**   | Spring Cloud Gateway | API 网关，统一入口，路由、限流、鉴权            |
| **注册中心**   | Eureka/Nacos         | 服务注册发现，微服务核心组件                    |

---

## 🎯 架构特点总结

### ✅ 优势

1. **信创合规**：全面采用国产化技术栈，满足政策要求
2. **微服务架构**：服务解耦，独立部署，弹性伸缩
3. **技术成熟**：Spring Cloud 生态，社区活跃，资料丰富
4. **完整治理**：配置、注册、网关、监控一应俱全

### ⚠️ 注意事项

| 组件    | 风险         | 建议                             |
| ------- | ------------ | -------------------------------- |
| Hystrix | 已停止维护   | 迁移到 Sentinel 或 Resilience4j  |
| Ribbon  | 进入维护模式 | 迁移到 Spring Cloud LoadBalancer |
| log4j2  | 历史漏洞     | 确保版本 ≥ 2.17.0                |

---

## 📚 参考资源

- [Spring Cloud 官方文档](https://spring.io/projects/spring-cloud)
- [Nacos 官方文档](https://nacos.io/zh-cn/docs/what-is-nacos.html)
- [Sa-Token 官方文档](https://sa-token.cc/)
- [ShardingSphere 官方文档](https://shardingsphere.apache.org/document/current/cn/overview/)
